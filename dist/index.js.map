{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///node_modules/common-errors/lib/helpers/class-generator.js","webpack:///node_modules/common-errors/lib/argument.js","webpack:///node_modules/common-errors/lib/io/io.js","webpack:///node_modules/common-errors/lib/http-status.js","webpack:///index.js","webpack:///errors.js","webpack:///node_modules/common-errors/index.js","webpack:///node_modules/common-errors/lib/internal/globalize.js","webpack:///node_modules/common-errors/lib/middleware/errorHandler.js","webpack:///node_modules/common-errors/lib/middleware/crashProtector.js","webpack:///node_modules/common-errors/lib/alreadyInUse.js","webpack:///node_modules/common-errors/lib/argumentNull.js","webpack:///node_modules/common-errors/lib/authenticationRequired.js","webpack:///node_modules/common-errors/lib/invalid-operation.js","webpack:///node_modules/common-errors/lib/not-found.js","webpack:///node_modules/common-errors/lib/not-supported.js","webpack:///node_modules/common-errors/lib/notPermitted.js","webpack:///node_modules/common-errors/lib/timeout.js","webpack:///node_modules/common-errors/lib/validation.js","webpack:///node_modules/common-errors/lib/io/file-load.js","webpack:///node_modules/common-errors/lib/io/file-not-found.js","webpack:///node_modules/common-errors/lib/data/data.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","util","globalize","generateErrorClass","options","subclass","console","warn","extends","Error","args","generateMessage","validateInput","validateArrayInput","Class","Function","join","classGeneratorFn","classConstructor","super_","this","global_initialize","arguments","length","message","captureStackTrace","inherits","error","error_class","inner_error","stack","str","test","toString","array","Array","isArray","generateClass","argumentName","http","STATUS_CODE_ATTRIBUTE_NAME","HttpStatusError","status_code","instance","apply","err","req","statusCode","code_map","http_message","message_map","ValidationError","ArgumentError","AuthenticationRequiredError","NotPermittedError","ArgumentNullError","method","params","route_path","route","path","RegExp","replace","NotFoundError","NotSupportedError","AlreadyInUseError","codes","keys","STATUS_CODES","forEach","BadRequestError","BadAccountError","ConflictError","ForbiddenError","ProxyError","UnauthorizedError","ServiceUnavailableError","NotAcceptableError","BaseController","[object Object]","loggerService","logger","HTTP","OK","BAD_REQUEST","UNAUTHORIZED","FORBIDDEN","NOT_FOUND","NOT_ACCEPTABLE","CONFLICT","INTERNAL_SERVER_ERROR","SERVICE_UNAVAILABLE","GATEWAY_TIMEOUT","levels","2","3","4","5","statusChar","undefined","body","level","getLogLevelFromStatusCode","constructor","headers","Access-Control-Allow-Origin","result","createResponseModel","errorCode","data","createErrorResponse","errorName","createUnexpectedErrorResponse","eventObject","requiredQueryStringParams","requiredRequestBodyParams","errors","trace","qs","JSON","parse","parseError","correlationObjectHeaderName","headerName","toLowerCase","correlationObject","correlationId","push","processPropertySet","propertySetName","requiredProperties","propertySet","propertyName","helpers","middleware","errorHandler","crashProtector","AlreadyInUse","Argument","ArgumentNull","AuthenticationRequired","ConnectionError","HttpStatus","InvalidOperationError","NotImplementedError","NotSupported","NotPermitted","OutOfMemoryError","RangeError","ReferenceError","StackOverflowError","SyntaxError","TimeoutError","TypeError","URIError","Validation","io","IOError","DirectoryNotFoundError","DriveNotFoundError","EndOfStreamError","FileLoadError","FileNotFoundError","SocketError","DataError","MemcachedError","MongoDBError","RedisError","RollbackError","SQLError","TransactionError","Generic","logErrorDeprecationWarning","logError","cb","isLogged","log","prependCurrentStack","offset_","linesToSkip","stackToPrepend","split","slice","mainStack","errTitle","shift","concat","global_errors","global","global_extend","__original_prototype__","global_class","__global_prototype__","proto_keys","proto_key","res","next","end","status","send","on","dispose","finished","_headers","run","entity_name","time","addError","addErrors","toJSON","map","text","code","field","file_name"],"mappings":"2BACA,IAAAA,EAAA,GAGA,SAAAC,oBAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,EAAAA,EAAAD,QAAAF,qBAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,oBAAAQ,EAAAF,EAGAN,oBAAAS,EAAAV,EAGAC,oBAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,oBAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAAAK,YAAA,EAAAC,IAAAL,KAKAZ,oBAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,QAAAA,OAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAAC,MAAA,WAEAP,OAAAC,eAAAb,EAAA,aAAA,CAAAmB,OAAA,KAQArB,oBAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,oBAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,GAAA,EAAAE,GAAA,iBAAAF,GAAAA,GAAAA,EAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,oBAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,UAAA,CAAAT,YAAA,EAAAK,MAAAA,IACA,EAAAE,GAAA,iBAAAF,EAAA,IAAA,IAAAM,KAAAN,EAAArB,oBAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAA,OAAAN,EAAAM,IAAAC,KAAA,KAAAD,IACA,OAAAF,GAIAzB,oBAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,GAAAA,EAAAqB,WACA,SAAAM,aAAA,OAAA3B,EAAA,SACA,SAAA4B,mBAAA,OAAA5B,GAEA,OADAH,oBAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,oBAAAa,EAAA,SAAAmB,EAAAC,GAAA,OAAAnB,OAAAoB,UAAAC,eAAA5B,KAAAyB,EAAAC,IAGAjC,oBAAAoC,EAAA,GAIApC,oBAAAA,oBAAAqC,EAAA,qBClFA,IAAAC,EAAAtC,EAAA,GACAuC,EAAAvC,EAAA,GAEAG,EAAAD,QAAA,SAAAsC,mBAAA7B,EAAA8B,IACAA,EAAAA,GAAA,IACAC,UAAAC,QAAAC,KAAA,gEACAH,EAAAI,QAAAJ,EAAAI,SAAAJ,EAAAC,UAAAI,MACAL,EAAAM,KAAAN,EAAAM,MAAA,CAAA,UAAA,eACAN,EAAAO,gBAAAP,EAAAO,iBAAA,KACAP,EAAAF,WAAA,IAAAE,EAAAF,UAEAU,EAAAtC,GACAuC,EAAAT,EAAAM,MAEA,IAwBAI,EAXA,IAAAC,SAAA,mBAAA,CACA,mBAAAzC,EAAA,IAAA8B,EAAAM,KAAAM,KAAA,MAAA,KACA,wBAAA1C,EAAA,OACA,gCAAAA,EAAA,eACA,+CACA,mBACA,WACA,2CACA,IACA,MACA0C,KAAA,IACAC,CAxBA,SAAAC,mBACAJ,EAAAK,OAAAjD,KAAAkD,MACAA,KAAAC,mBAAAD,KAAAC,kBAAAP,GAEAM,KAAAV,KAAAY,UACA,IAAA,IAAAvD,EAAA,EAAAA,EAAAqC,EAAAM,KAAAa,OAAAxD,IACAqD,KAAAhB,EAAAM,KAAA3C,IAAAuD,UAAAvD,GAEAqD,KAAA9C,KAAAA,EACA8C,KAAAT,kBAAAS,KAAAI,QAAAJ,KAAAT,mBACAG,EAAAW,kBAAAL,KAAAN,KA0BA,OAVAb,EAAAyB,SAAAZ,EAAAV,EAAAI,SAEAM,EAAAjB,UAAAc,gBAAAP,EAAAO,gBAEAG,EAAAW,kBAAA,SAAAA,kBAAAE,EAAAC,GACAnB,MAAAgB,kBAAAE,EAAAC,GACAD,EAAAE,aAAAF,EAAAE,YAAAC,QAAAH,EAAAG,OAAA,0BAAAH,EAAAE,YAAAC,QAGA1B,EAAAF,WAAAA,EAAAY,GACAA,GAGA,IAAAF,EAAA,SAAAA,cAAAmB,GACA,GAAA,iBAAAA,IAAA,YAAAC,KAAAD,GAAA,MAAA,IAAAtB,MAAA,8BAAAsB,GAAA,IAAAE,WAAA,oCAEApB,EAAA,SAAAA,mBAAAqB,GACA,IAAAA,IAAAC,MAAAC,QAAAF,GAAA,MAAA,IAAAzB,MAAA,wDACA,IAAA,IAAA1C,EAAA,EAAAA,EAAAmE,EAAAX,OAAAxD,IAAA6C,EAAAsB,EAAAnE,+DC1DA,IAAAsE,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,gBAAA,CACA3B,KAAA,CAAA,eAAA,eACAC,gBAAA,WACA,MAAA,yCAAAS,KAAAkB,iCCJAxE,EAAAD,QAAAF,EAAA,EAAAA,CAAA,4BCAA,IAAA4E,EAAA5E,EAAA,IACAsC,EAAAtC,EAAA,GAEA6E,EAAA1E,EAAAD,QAAA2E,2BAAA,SAEAC,EAAA3E,EAAAD,QAAA,SAAA4E,gBAAAC,EAAAlB,GACA,KAAAJ,gBAAAqB,iBAAA,CACA,IAAAE,EAAAlE,OAAAY,OAAAoD,gBAAA5C,WAEA,OADA4C,gBAAAG,MAAAD,EAAArB,WACAqB,EAGA,GAAA,iBAAAnB,GAAA,iBAAAkB,EAAA,CAEA,IAAAtE,EAAAoD,EACAA,EAAAkB,EACAA,EAAAtE,OACA,GAAAsE,aAAAjC,MAAA,CACA,IAAAoC,EAAAH,EACAI,EAAAtB,EAEA,iBADAkB,EAAAG,EAAAE,YAAAF,EAAAH,aAAAG,EAAAL,MAGA,mBADAE,EAAAM,EAAAH,EAAAvE,SAEAoE,EAAAG,EAAAC,GACAJ,EAAAG,EAAAH,aAEAA,EAAAA,GAAA,KAEAlB,EAAAqB,EAAArB,QACAJ,KAAAU,MAAAe,EAAAf,MAGAV,KAAAsB,YAAAtB,KAAA2B,WAAA3B,KAAAoB,GAAAE,GAAA,IACAtB,KAAA9C,KAAA,kBAEA,IAAA2E,EAAA,IAAA7B,KAAAsB,YAAA,KAAAQ,EAAAR,KAAA,EACAtB,KAAAI,QAAAA,GAAAyB,EACA7B,KAAAU,OAAArB,MAAAgB,kBAAAL,KAAAqB,iBACAjB,IAAAJ,KAAAU,MAAAmB,EAAA,KAAA7B,KAAAU,QAEA7B,EAAAyB,SAAAe,EAAAhC,OAEA,IAAAuC,EAAAP,EAAAO,SAAA,CACAG,gBAAA,IACAC,cAAA,IACAC,4BAAA,IACAC,kBAAA,IACAC,kBAAA,SAAAV,EAAAC,GACA,IAAAU,EAAAV,GAAAA,EAAAU,QAAA,MACAC,EAAAX,GAAAA,EAAAW,QAAA,GACAC,EAAAZ,GAAAA,EAAAa,OAAAb,EAAAa,MAAAC,MAAA,GAEA,YAAA5B,KAAAwB,IAAAC,EAAA3D,eAAA+C,EAAAP,eAAA,IAAAuB,OAAA,IAAAhB,EAAAP,cAAAN,KAAA0B,EAAA,KAAAb,EAAAH,YAAA,IACAG,EAAAH,YAAA,IACAG,EAAArB,QAAAqB,EAAArB,QAAAsC,QAAA,IAAAD,OAAA,uBAAAhB,EAAAP,aAAA,MAAA,oBAEAyB,cAAA,IACAC,kBAAA,IACAC,kBAAA,KAGAC,EAAA,GACAzF,OAAA0F,KAAA5B,EAAA6B,cAAAC,QAAA,SAAA/E,GACA4E,EAAA5E,GAAAiD,EAAA6B,aAAA9E,KAEA,IAAA4D,EAAAT,EAAAS,YAAAgB,mBClEA,MAAAI,gBACAA,EAAAC,gBACAA,EAAAC,cACAA,EAAAC,eACAA,EAAAC,WACAA,EAAAC,kBACAA,EAAAZ,cACAA,EAAAa,wBACAA,EAAAC,mBACAA,GACAlH,EAAA,GAEAG,EAAAD,QAAA,MAAAiH,eACAC,YAAAC,GACA5D,KAAA6D,OAAAD,EAGAE,WACA,MAAA,CACAC,GAAA,IACAC,YAAA,IACAC,aAAA,IACAC,UAAA,IACAC,UAAA,IACAC,eAAA,IACAC,SAAA,IACAC,sBAAA,IACAC,oBAAA,IACAC,gBAAA,KAUAb,0BAAAhC,GACA,MAAA8C,EAAA,CACAC,EAAA,OACAC,EAAA,OACAC,EAAA,OACAC,EAAA,SAMAC,EAAAnD,EAAAA,EAAAd,WAAA,QAAAkE,EAEA,OAAAD,GAAAL,EAAAK,GAAAL,EAAAK,GAAA,QAGAnB,oBAAAhC,EAAAqD,GACA,MAAAC,EAAAjF,KAAAkF,0BAAAvD,GAQA,OANA3B,KAAA6D,OAAAoB,GACA,oBACA,CAAAtD,WAAAA,EAAAqD,KAAAA,GACAhF,KAAAmF,YAAAjI,MAGA,CACA8H,KAAAA,EACArD,WAAAA,EACAyD,QAAA,CACAC,8BAAA,MAKA1B,sBAAA2B,GACA,OAAAtF,KAAAuF,oBAAAvF,KAAA8D,KAAAC,GAAA,CAAAuB,OAAAA,IAGA3B,oBAAA6B,EAAApF,EAAAqF,GAKA,MAJA,iBAAAA,IACAA,EAAAA,GAAAA,EAAArF,SAAAqF,GAGAzF,KAAAuF,oBAAAC,EAAA,CACAA,UAAAA,EACApF,QAAAA,EACAqF,KAAAA,IAIA9B,8BAAA8B,GACA,OAAAzF,KAAA0F,oBACA1F,KAAA8D,KAAAQ,sBACA,gCACAmB,GAIA9B,oBAAApD,GACA,IAAAoF,EAAApF,EAAArD,MAAA,gBAGA,OAAAqD,aAAA2C,GAEAlD,KAAA6D,OAAA1E,KAAAwG,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBACA1F,KAAA8D,KAAAE,YACAzD,EAAAH,UAEAG,aAAAgD,GAEAvD,KAAA6D,OAAA1E,KAAAwG,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBACA1F,KAAA8D,KAAAG,aACA1D,EAAAH,UAEAG,aAAA6C,GAEApD,KAAA6D,OAAA1E,KAAAwG,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBAAA1F,KAAA8D,KAAAO,SAAA9D,EAAAH,UACAG,aAAA+C,GAEAtD,KAAA6D,OAAAtD,MAAAoF,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBACA1F,KAAA8D,KAAAU,gBACAjE,EAAAH,UAEAG,aAAA4C,GAEAnD,KAAA6D,OAAA1E,KAAAwG,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBAAA1F,KAAA8D,KAAAI,UAAA3D,EAAAH,UACAG,aAAA8C,GAEArD,KAAA6D,OAAA1E,KAAAwG,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBAAA1F,KAAA8D,KAAAI,UAAA3D,EAAAH,UACAG,aAAAoC,GAEA3C,KAAA6D,OAAA1E,KAAAwG,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBAAA1F,KAAA8D,KAAAK,UAAA5D,EAAAH,UACAG,aAAAiD,GAEAxD,KAAA6D,OAAAtD,MAAAoF,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBACA1F,KAAA8D,KAAAS,oBACAhE,EAAAH,UAEAG,aAAAkD,GACAzD,KAAA6D,OAAA1E,KAAAwG,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA0F,oBACA1F,KAAA8D,KAAAM,eACA7D,EAAAH,WAKAJ,KAAA6D,OAAAtD,MAAAoF,EAAApF,EAAAP,KAAAmF,YAAAjI,MACA8C,KAAA4F,8BAAArF,IAMAoD,yBACAkC,EACAC,EACAC,GAEA,IAEAC,EAAA,GAQA,GANAhG,KAAA6D,OAAAoC,MACA,mDACA,CAAAC,GAAAJ,EAAAd,KAAAe,GACA/F,KAAAmF,YAAAjI,MAGA2I,EAAAb,KACA,IACAa,EAAAb,KAAAmB,KAAAC,MAAAP,EAAAb,MACA,MAAAqB,GACA,MAAA,IAAAnD,EAAAmD,EAAAjG,SAKA,GAAAyF,EAAAT,QAAA,CACA,IAAAkB,EAAA,qBAGAjJ,OAAA0F,KAAA8C,EAAAT,SAAAnC,QAAAsD,IACAA,EAAAC,gBAAAF,IAEAA,EAAAC,KAIA,IAMA,GAJAV,EAAAY,kBAAAN,KAAAC,MACAP,EAAAT,QAAAkB,KAGAT,EAAAY,kBAAAC,cACA,MAAA,IAAArH,MAGA,MAAAkB,GACAyF,EAAAW,KACA,iEAIAX,EAAAW,KAAA,2CAGA,SAAAC,mBAAAC,EAAAC,GACA,IAAAC,EAAAlB,EAAAgB,GAEAC,GAAAA,EAAA3G,OAAA,IAEA4G,MAAAA,EACAf,EAAAW,wCACAE,wBAIAC,EAAA7D,QAAA+D,IACAD,EAAAC,IAIAhB,EAAAW,sBACAK,kCAAAH,SAWA,GAJAD,mBAzEA,wBAyEAd,GACAc,mBAzEA,OAyEAb,GAGAC,EAAA7F,OAAA,EACA,MAAA,IAAA+C,EAAA8C,EAAApG,KAAA,yBCnPA,MAAAqH,QAAAA,GAAA1K,EAAA,GAEAG,EAAAD,QAAA,CACAyG,gBAAA+D,EAAAhG,cAAA,mBACAkC,gBAAA8D,EAAAhG,cAAA,mBACAmC,cAAA6D,EAAAhG,cAAA,iBACAoC,eAAA4D,EAAAhG,cAAA,kBACAqC,WAAA2D,EAAAhG,cAAA,cACAsC,kBAAA0D,EAAAhG,cAAA,qBACA0B,cAAAsE,EAAAhG,cAAA,iBACAuC,wBAAAyD,EAAAhG,cAAA,2BACAwC,mBAAAwD,EAAAhG,cAAA,wCCXA1E,EAAA,IAEAE,EAAAC,EAAAD,QAAA,CACAwK,QAAA,CACAhG,cAAA1E,EAAA,IAEA2K,WAAA,CACAC,aAAA5K,EAAA,GACA6K,eAAA7K,EAAA,OAIAsG,kBAAApG,EAAA4K,aAAA9K,EAAA,IACAE,EAAAuF,cAAAvF,EAAA6K,SAAA/K,EAAA,GACAE,EAAA0F,kBAAA1F,EAAA8K,aAAAhL,EAAA,IACAE,EAAAwF,4BAAAxF,EAAA+K,uBAAAjL,EAAA,IACAE,EAAAgL,gBAAAhL,EAAAwK,QAAAhG,cAAA,mBACAxE,EAAA4C,MAAA5C,EAAAwK,QAAAhG,cAAA,SACAxE,EAAA4E,gBAAA5E,EAAAiL,WAAAnL,EAAA,GACAE,EAAAkL,sBAAApL,EAAA,IACAE,EAAAkG,cAAApG,EAAA,IACAE,EAAAmL,oBAAAnL,EAAAwK,QAAAhG,cAAA,uBACAxE,EAAAmG,kBAAAnG,EAAAoL,aAAAtL,EAAA,IACAE,EAAAyF,kBAAAzF,EAAAqL,aAAAvL,EAAA,IACAE,EAAAsL,iBAAAtL,EAAAwK,QAAAhG,cAAA,oBACAxE,EAAAuL,WAAAvL,EAAAwK,QAAAhG,cAAA,aAAA,CAAA7B,QAAA4I,aACAvL,EAAAwL,eAAAxL,EAAAwK,QAAAhG,cAAA,iBAAA,CAAA7B,QAAA6I,iBACAxL,EAAAyL,mBAAAzL,EAAAwK,QAAAhG,cAAA,sBACAxE,EAAA0L,YAAA1L,EAAAwK,QAAAhG,cAAA,cAAA,CAAA7B,QAAA+I,cACA1L,EAAA2L,aAAA7L,EAAA,IACAE,EAAA4L,UAAA5L,EAAAwK,QAAAhG,cAAA,YAAA,CAAA7B,QAAAiJ,YACA5L,EAAA6L,SAAA7L,EAAAwK,QAAAhG,cAAA,WAAA,CAAA7B,QAAAkJ,WACA7L,EAAAsF,gBAAAtF,EAAA8L,WAAAhM,EAAA,IAEAE,EAAA+L,GAAA,CACAC,QAAAlM,EAAA,IAEAE,EAAA+L,GAAAE,uBAAAjM,EAAAwK,QAAAhG,cAAA,yBAAA,CAAA7B,QAAA3C,EAAA+L,GAAAC,UACAhM,EAAA+L,GAAAG,mBAAAlM,EAAAwK,QAAAhG,cAAA,qBAAA,CAAA7B,QAAA3C,EAAA+L,GAAAC,UACAhM,EAAA+L,GAAAI,iBAAAnM,EAAAwK,QAAAhG,cAAA,mBAAA,CAAA7B,QAAA3C,EAAA+L,GAAAC,UACAhM,EAAA+L,GAAAK,cAAAtM,EAAA,IACAE,EAAA+L,GAAAM,kBAAAvM,EAAA,IACAE,EAAA+L,GAAAO,YAAAtM,EAAAwK,QAAAhG,cAAA,cAAA,CAAA7B,QAAA3C,EAAA+L,GAAAC,UAEAhM,EAAAgJ,KAAA,CACAuD,UAAAzM,EAAA,KAEAE,EAAAgJ,KAAAwD,eAAAxM,EAAAwK,QAAAhG,cAAA,iBAAA,CAAA7B,QAAA3C,EAAAgJ,KAAAuD,YACAvM,EAAAgJ,KAAAyD,aAAAzM,EAAAwK,QAAAhG,cAAA,eAAA,CAAA7B,QAAA3C,EAAAgJ,KAAAuD,YACAvM,EAAAgJ,KAAA0D,WAAA1M,EAAAwK,QAAAhG,cAAA,aAAA,CAAA7B,QAAA3C,EAAAgJ,KAAAuD,YACAvM,EAAAgJ,KAAA2D,cAAA3M,EAAAwK,QAAAhG,cAAA,gBAAA,CAAA7B,QAAA3C,EAAAgJ,KAAAuD,YACAvM,EAAAgJ,KAAA4D,SAAA5M,EAAAwK,QAAAhG,cAAA,WAAA,CAAA7B,QAAA3C,EAAAgJ,KAAAuD,YACAvM,EAAAgJ,KAAA6D,iBAAA7M,EAAAwK,QAAAhG,cAAA,mBAAA,CAAA7B,QAAA3C,EAAAgJ,KAAAuD,YAIAvM,EAAA8M,QAAA9M,EAAAwK,QAAAhG,cAAA,gBAGA,IAAAuI,GAAA,EACA9M,EAAAD,QAAAgN,SAAA,SAAAhI,EAAAiI,GACAF,GAAAtK,QAAAC,KAAA,6CACAqK,GAAA,EAEA/H,IAAAA,EAAAkI,WACAlI,EAAAkI,UAAA,EACAzK,QAAAqB,MAAAkB,IAEAiI,GAAAA,EAAAjI,IAGA/E,EAAAD,QAAAmN,IAAA,SAAAnI,EAAArB,GAaA,MAZA,iBAAAqB,EACAA,EAAA,IAAA/E,EAAAD,QAAA4C,MAAAoC,IAEArB,IACAqB,EAAArB,QAAAA,GAEAqB,EAAA/E,EAAAD,QAAAoN,oBAAApI,EAAA,IAEAA,IACAvC,QAAAqB,MAAAkB,GAAAA,EAAAf,OAAAe,GACAA,EAAAkI,UAAA,GAEAlI,GAGA/E,EAAAD,QAAAoN,oBAAA,SAAApI,EAAAqI,GACA,IAAAC,OAAA,IAAAD,EAAA,EAAAA,EACAE,GAAA,IAAA3K,OAAAqB,MAAAuJ,MAAA,MAAAC,MAAAH,GACAI,GAAA1I,EAAAf,OAAA,IAAAuJ,MAAA,MACAG,EAAAD,EAAAE,QAEA,OADA5I,EAAAf,MAAA,CAAA0J,GAAAE,OAAAN,EAAA,OAAAG,GAAAvK,KAAA,MACA6B,oBC7FAlF,EAAA,GAAA,IACA2B,EAAA,0BACAqM,EAAAC,OAAAtM,GAAAsM,OAAAtM,IAAA,GAEAxB,EAAAD,QAAA,SAAAgO,cAAA/K,GACAA,EAAAgL,uBAAAhL,EAAAjB,UACA,IAAAkM,EAAAJ,EAAA7K,EAAAxC,MAAAqN,EAAA7K,EAAAxC,OAAAwC,EACAA,EAAAjB,UAAAiB,EAAAkL,qBAAAD,EAAAlM,UACAiB,EAAAjB,UAAAwB,kBAAAP,EAAAjB,UAAAwB,mBAAA,SAAAA,kBAAAP,GAEA,IADA,IAAAmL,EAAAxN,OAAA0F,KAAArD,EAAAgL,wBACA/N,EAAA,EAAAA,EAAAkO,EAAA1K,OAAAxD,IAAA,CACA,IAAAmO,EAAAD,EAAAlO,GACAqD,KAAA8K,GAAApL,EAAAgL,uBAAAI,uBCZA,IAAAzJ,EAAA9E,EAAA,GAEAG,EAAAD,QAAA,SAAA0K,aAAA1F,EAAAC,EAAAqJ,EAAAC,GACA,IAAAvJ,EACA,OAAAuJ,EAAAA,IACAD,EAAAE,OAGAxJ,EAAA,IAAAJ,EAAAI,EAAAC,IACAJ,aAAA,MACApC,QAAAqB,MAAAkB,EAAAf,OACAe,EAAArB,QAAAiB,EAAAS,YAAA,MAGAiJ,EAAAG,OAAAzJ,EAAAH,aAAA6J,KAAA1J,EAAArB,oECdA1D,EAAAD,QAAA,SAAA0K,GACA,OAAA,SAAAC,eAAA1F,EAAAqJ,EAAAC,GACA,IACA/N,EADAV,EAAA,IACA0B,SACAhB,EAAAmO,GAAA,QAAA,SAAA3J,GAGA,GAFAvC,QAAAqB,MAAA,0BACAtD,EAAAoO,UACAN,EAAAO,UAAAjO,OAAA0F,KAAAgI,EAAAQ,UAAApL,OAEA,OADAjB,QAAAqB,MAAAkB,GAAAA,EAAAf,OACAqK,EAAAE,MAEA9D,EAAAA,EAAA1F,EAAAC,EAAAqJ,GACAC,EAAAvJ,KAEAxE,EAAAuO,IAAAR,iECdA,IAAA/J,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,oBAAA,CACA3B,KAAA,CAAA,cAAA,OAAA,OAAA,OAAA,QACAC,gBAAA,WACA,IAAAD,EAAAyB,MAAAtC,UAAAyL,MAAApN,KAAAkD,KAAAV,KAAA,GACA,MAAA,kBAAAU,KAAAyL,YAAA,kCAAAnM,EAAAM,KAAA,0BCLA,IAAAqB,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,oBAAA,CACA3B,KAAA,CAAA,eAAA,eACAF,QAAA7C,EAAA,GACAgD,gBAAA,WACA,MAAA,qBAAAS,KAAAkB,iCCLA,IAAAD,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,8BAAA,CACA3B,KAAA,CAAA,UAAA,eACAC,gBAAA,WACA,MAAA,uEAAAS,KAAAI,4BCJA,IAAAa,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,wBAAA,CACA3B,KAAA,CAAA,UAAA,eACAC,gBAAA,WACA,MAAA,sBAAAS,KAAAI,4BCJA,IAAAa,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,gBAAA,CACA3B,KAAA,CAAA,cAAA,eACAC,gBAAA,WACA,MAAA,eAAAS,KAAAyL,YAAA,wBCJA,IAAAxK,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,oBAAA,CACA3B,KAAA,CAAA,UAAA,eACAC,gBAAA,WACA,MAAA,kBAAAS,KAAAI,4BCJA,IAAAa,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,oBAAA,CACA3B,KAAA,CAAA,UAAA,eACAC,gBAAA,WACA,MAAA,sEAAAS,KAAAI,4BCJA,IAAAa,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,eAAA,CACA3B,KAAA,CAAA,OAAA,eACAC,gBAAA,WACA,MAAA,MAAAqB,KAAAZ,KAAA0L,MAAA,eAAA1L,KAAA0L,KAAA,aACA,qBAAA1L,KAAA0L,yBCLA,IAAAzK,EAAA1E,EAAA,GACAyF,EAAAzF,EAAA,GAEAwF,EAAArF,EAAAD,QAAAwE,EAAA,kBAAA,CACA3B,KAAA,CAAA,UAAA,OAAA,WAGAyC,EAAAtD,UAAAkN,SAAA,SAAAA,SAAApL,GAGA,OAFAP,KAAAgG,OAAAhG,KAAAgG,QAAA,GACAhG,KAAAgG,OAAAW,KAAApG,GACAP,MAGA+B,EAAAtD,UAAAmN,UAAA,SAAAA,UAAA5F,GACA,KAAAA,aAAAjF,OAAA,MAAA,IAAAiB,EAAA,UAIA,OAFAhC,KAAAgG,OAAAhG,KAAAgG,QAAA,GACAjF,MAAAtC,UAAAkI,KAAAnF,MAAAxB,KAAAgG,OAAAA,GACAhG,MAGA+B,EAAAtD,UAAAc,gBAAA,SAAAA,kBACA,OAAAS,KAAAI,SAAA,sBAGA2B,EAAAtD,UAAAoN,OAAA,SAAAA,SACA,IAAAzO,EAAA,GAWA,OAVA4C,KAAAgG,QACAhG,KAAAI,UAAAhD,EAAAgD,QAAAJ,KAAAI,SACAhD,EAAA4I,OAAAhG,KAAAgG,OAAA8F,IAAA,SAAAvL,GACA,OAAAA,EAAAsL,aAGA7L,KAAAI,UAAAhD,EAAA2O,KAAA/L,KAAAI,SACAJ,KAAAgM,OAAA5O,EAAA4O,KAAAhM,KAAAgM,MACAhM,KAAAiM,QAAA7O,EAAA6O,MAAAjM,KAAAiM,QAEA7O,oBCrCA,IAAA6D,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,gBAAA,CACA3B,KAAA,CAAA,YAAA,eACAF,QAAA7C,EAAA,GACAgD,gBAAA,WACA,MAAA,wBAAAS,KAAAkM,8BCLA,IAAAjL,EAAA1E,EAAA,GACAG,EAAAD,QAAAwE,EAAA,oBAAA,CACA3B,KAAA,CAAA,YAAA,eACAF,QAAA7C,EAAA,GACAgD,gBAAA,WACA,MAAA,mBAAAS,KAAAkM,8BCLAxP,EAAAD,QAAAF,EAAA,EAAAA,CAAA","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","var util = require('util');\nvar globalize = require('../internal/globalize');\n\nmodule.exports = function generateErrorClass(name, options){\n  options = options || {};\n  if(options.subclass) console.warn(\"options.subclass is deprecated. use options.extends instead.\");\n  options.extends = options.extends || options.subclass || Error;\n  options.args = options.args || ['message', 'inner_error'];\n  options.generateMessage = options.generateMessage || null;\n  options.globalize = options.globalize === false ? false : true;\n\n  validateInput(name);\n  validateArrayInput(options.args);\n\n  var classConstructor = function classConstructor(){\n    Class.super_.call(this);\n    if(this.global_initialize) this.global_initialize(Class);\n\n    this.args = arguments;\n    for(var i = 0; i<options.args.length; i++){\n      this[options.args[i]] = arguments[i];\n    }\n    this.name = name;\n    if(this.generateMessage) this.message = this.generateMessage();\n    Class.captureStackTrace(this, Class);\n  };\n\n  var classGeneratorFn = new Function('classConstructor', [\n    \"return function \", name, \"(\", options.args.join(', '), \"){\",\n      \"if(!(this instanceof \", name, \")) {\",\n        \"var instance = Object.create(\", name, \".prototype);\",\n        \"classConstructor.apply(instance, arguments);\",\n        \"return instance;\",\n      \"} else {\",\n        \"classConstructor.apply(this, arguments);\",\n      \"}\",\n    \"};\",\n  ].join(''));\n  var Class = classGeneratorFn(classConstructor);\n\n  util.inherits(Class, options.extends);\n\n  Class.prototype.generateMessage = options.generateMessage;\n\n  Class.captureStackTrace = function captureStackTrace(error, error_class){\n    Error.captureStackTrace(error, error_class);\n    if(error.inner_error && error.inner_error.stack) error.stack += \"\\n--- inner error ---\\n\" + error.inner_error.stack;\n  }\n\n  if(options.globalize) globalize(Class);\n  return Class;\n}\n\nvar validateInput = function validateInput(str){\n  if(typeof str != 'string' || !/^[\\-\\w]+$/.test(str)) throw new Error(\"Unsafe or invalid string '\" + (str || '').toString() + \"' used to generate Error class.\");\n}\nvar validateArrayInput = function validateArrayInput(array){\n  if(!array || !Array.isArray(array)) throw new Error(\"Unsafe or invalid args used to generate Error class.\");\n  for(var i = 0; i<array.length; i++) validateInput(array[i]);\n}","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"ArgumentError\", {\n  args: ['argumentName', 'inner_error'],\n  generateMessage: function(){\n    return \"Invalid or missing argument supplied: \" + this.argumentName;\n  }\n})\n","module.exports = require('../helpers/class-generator')('IOError');","var http = require('http');\nvar util = require('util');\n\nvar STATUS_CODE_ATTRIBUTE_NAME = module.exports.STATUS_CODE_ATTRIBUTE_NAME = 'status';\n\nvar HttpStatusError = module.exports = function HttpStatusError(status_code, message) {\n  if(!(this instanceof HttpStatusError)) {\n    var instance = Object.create(HttpStatusError.prototype);\n    HttpStatusError.apply(instance, arguments);\n    return instance;\n  }\n\n  if(typeof message == 'number' && typeof status_code != 'number') {\n    //old interface, so swap.\n    var c = message;\n    message = status_code;\n    status_code = c;\n  } else if(status_code instanceof Error) {\n    var err = status_code;\n    var req = message;\n    status_code = err.statusCode || err.status_code || err[STATUS_CODE_ATTRIBUTE_NAME];\n    if(typeof status_code != \"number\") {\n      status_code = code_map[err.name];\n      if(typeof status_code == \"function\") {\n        status_code(err, req);\n        status_code = err.status_code;\n      }\n      status_code = status_code || 500;\n    } \n    message = err.message;\n    this.stack = err.stack;\n  }\n\n  this.status_code = this.statusCode = this[STATUS_CODE_ATTRIBUTE_NAME] = status_code || 500;\n  this.name = \"HttpStatusError\";\n\n  var http_message = \"(\" + this.status_code + \") \" + message_map[status_code] || message_map[status_code >= 500 ? 500 : 400];\n  this.message = message || http_message;\n  if(!this.stack) Error.captureStackTrace(this, HttpStatusError);\n  if(message) this.stack = http_message + \"\\n\" + this.stack;\n}\nutil.inherits(HttpStatusError, Error);\n\nvar code_map = HttpStatusError.code_map = {\n  \"ValidationError\": 400,\n  \"ArgumentError\": 400,\n  \"AuthenticationRequiredError\": 401,\n  \"NotPermittedError\": 403,\n  \"ArgumentNullError\": function(err, req){\n    var method = req && req.method || 'GET';\n    var params = req && req.params || {};\n    var route_path = req && req.route && req.route.path || '';\n\n    if(/GET|HEAD/i.test(method) || params.hasOwnProperty(err.argumentName) || new RegExp(\":\" + err.argumentName + '').test(route_path + '/')) err.status_code = 404;\n    else err.status_code = 400;\n    err.message = err.message.replace(new RegExp(\"^Missing argument: (\" + err.argumentName + \")$\"), 'Not Found: \"$1\"' );\n  },\n  \"NotFoundError\": 404,\n  \"NotSupportedError\": 405,\n  \"AlreadyInUseError\": 409,\n};\n\nvar codes = {};\nObject.keys(http.STATUS_CODES).forEach(function(key){\n  codes[key] = http.STATUS_CODES[key];\n});\nvar message_map = HttpStatusError.message_map = codes;","const {\n    BadRequestError,\n    BadAccountError,\n    ConflictError,\n    ForbiddenError,\n    ProxyError,\n    UnauthorizedError,\n    NotFoundError,\n    ServiceUnavailableError,\n    NotAcceptableError\n} = require('./errors');\n\nmodule.exports = class BaseController {\n    constructor(loggerService) {\n        this.logger = loggerService;\n    }\n\n    get HTTP() {\n        return {\n            OK: 200,\n            BAD_REQUEST: 400,\n            UNAUTHORIZED: 401,\n            FORBIDDEN: 403,\n            NOT_FOUND: 404,\n            NOT_ACCEPTABLE: 406,\n            CONFLICT: 409,\n            INTERNAL_SERVER_ERROR: 500,\n            SERVICE_UNAVAILABLE: 503,\n            GATEWAY_TIMEOUT: 504\n        };\n    }\n\n    /**\n     * Gets the proper logging level for that status code passed.\n     * This can handle both a number or a string status code.\n     * @param {String/Number} statusCode\n     * @returns {String} proper log level for the statusCode\n     */\n    getLogLevelFromStatusCode(statusCode) {\n        const levels = {\n            2: 'info', // 2XX\n            3: 'info', // 3XX\n            4: 'warn', // 4XX\n            5: 'error' // 5XX\n        };\n\n        // if the statusCode is defined and the status code matches one of the expected options,\n        // then return that option\n        // else return \"error\"\n        const statusChar = statusCode ? statusCode.toString()[0] : undefined;\n\n        return statusChar && levels[statusChar] ? levels[statusChar] : 'error';\n    }\n\n    createResponseModel(statusCode, body) {\n        const level = this.getLogLevelFromStatusCode(statusCode);\n\n        this.logger[level](\n            'Creating response',\n            { statusCode, body },\n            this.constructor.name\n        );\n\n        return {\n            body,\n            statusCode,\n            headers: {\n                'Access-Control-Allow-Origin': '*'\n            }\n        };\n    }\n\n    createSuccessResponse(result) {\n        return this.createResponseModel(this.HTTP.OK, { result: result });\n    }\n\n    createErrorResponse(errorCode, message, data) {\n        if (typeof data !== 'string') {\n            data = (data && data.message) || data;\n        }\n\n        return this.createResponseModel(errorCode, {\n            errorCode,\n             message,\n            data\n        });\n    }\n\n    createUnexpectedErrorResponse(data) {\n        return this.createErrorResponse(\n            this.HTTP.INTERNAL_SERVER_ERROR,\n            'An unexpected error occurred!',\n            data\n        );\n    }\n\n    handleServiceErrors(error) {\n        let errorName = error.name || 'Unnamed Error';\n\n        // Handle errors\n        if (error instanceof BadRequestError) {\n            // 400\n            this.logger.warn(errorName, error, this.constructor.name);\n            return this.createErrorResponse(\n                this.HTTP.BAD_REQUEST,\n                error.message\n            );\n        } else if (error instanceof UnauthorizedError) {\n            // 401\n            this.logger.warn(errorName, error, this.constructor.name);\n            return this.createErrorResponse(\n                this.HTTP.UNAUTHORIZED,\n                error.message\n            );\n        } else if (error instanceof ConflictError) {\n            // 409\n            this.logger.warn(errorName, error, this.constructor.name);\n            return this.createErrorResponse(this.HTTP.CONFLICT, error.message);\n        } else if (error instanceof ProxyError) {\n            // 504\n            this.logger.error(errorName, error, this.constructor.name);\n            return this.createErrorResponse(\n                this.HTTP.GATEWAY_TIMEOUT,\n                error.message\n            );\n        } else if (error instanceof BadAccountError) {\n            // 403\n            this.logger.warn(errorName, error, this.constructor.name);\n            return this.createErrorResponse(this.HTTP.FORBIDDEN, error.message);\n        } else if (error instanceof ForbiddenError) {\n            // 403\n            this.logger.warn(errorName, error, this.constructor.name);\n            return this.createErrorResponse(this.HTTP.FORBIDDEN, error.message);\n        } else if (error instanceof NotFoundError) {\n            // 404\n            this.logger.warn(errorName, error, this.constructor.name);\n            return this.createErrorResponse(this.HTTP.NOT_FOUND, error.message);\n        } else if (error instanceof ServiceUnavailableError) {\n            // 503\n            this.logger.error(errorName, error, this.constructor.name);\n            return this.createErrorResponse(\n                this.HTTP.SERVICE_UNAVAILABLE,\n                error.message\n            );\n        } else if (error instanceof NotAcceptableError) {\n            this.logger.warn(errorName, error, this.constructor.name);\n            return this.createErrorResponse(\n                this.HTTP.NOT_ACCEPTABLE,\n                error.message\n            );\n        }\n\n        // Error 500\n        this.logger.error(errorName, error, this.constructor.name);\n        return this.createUnexpectedErrorResponse(error);\n    }\n\n    // verifyRequiredParameters() collects errors about missing params and throws an Error if any are missing\n    // requiredQueryStringParams and requiredRequestBodyParams are expected to be arrays of strings\n    // This function also parses the event.body from JSON into an object\n    verifyRequiredParameters(\n        eventObject,\n        requiredQueryStringParams,\n        requiredRequestBodyParams\n    ) {\n        let queryStringPropertyName = 'queryStringParameters';\n        let requestBodyPropertyName = 'body';\n        let errors = [];\n\n        this.logger.trace(\n            'BaseController.verifyRequiredParameters() called',\n            { qs: requiredQueryStringParams, body: requiredRequestBodyParams },\n            this.constructor.name\n        );\n\n        if (eventObject.body) {\n            try {\n                eventObject.body = JSON.parse(eventObject.body);\n            } catch (parseError) {\n                throw new BadRequestError(parseError.message);\n            }\n        }\n\n        // Require the \"Correlation-Object\" header\n        if (eventObject.headers) {\n            let correlationObjectHeaderName = 'correlation-object';\n\n            // get the current correlationObject from headers\n            Object.keys(eventObject.headers).forEach(headerName => {\n                if (headerName.toLowerCase() === correlationObjectHeaderName) {\n                    // The headerName itself may be any capitalization. So this checks for a case-insenstive match.\n                    correlationObjectHeaderName = headerName;\n                }\n            });\n\n            try {\n                // Try to parse the header as JSON. If it fails or if there isn't a correlationId property, then we throw an error\n                eventObject.correlationObject = JSON.parse(\n                    eventObject.headers[correlationObjectHeaderName]\n                );\n\n                if (!eventObject.correlationObject.correlationId)\n                    throw new Error();\n\n                // TODO: The correlationObject is intended to be output in all log messages. This is not yet implemented.\n            } catch (error) {\n                errors.push(\n                    'A Correlation-Object header is required in the request.'\n                );\n            }\n        } else {\n            errors.push('Event headers are missing or malformed.');\n        }\n\n        function processPropertySet(propertySetName, requiredProperties) {\n            let propertySet = eventObject[propertySetName];\n\n            if (requiredProperties && requiredProperties.length > 0) {\n                // fail if the propertySet isn't defined\n                if (propertySet === undefined || propertySet === null) {\n                    errors.push(\n                        `Request event is malformed. The ${propertySetName} object is missing.`\n                    );\n                } else {\n                    // Check for each of the required properties\n                    requiredProperties.forEach(propertyName => {\n                        let value = propertySet[propertyName];\n\n                        // If the value isn't there or is blank, then add it to the errors list\n                        if (!value)\n                            errors.push(\n                                `The parameter ${propertyName} is required in the Request's ${propertySetName}.`\n                            );\n                    });\n                }\n            }\n        }\n\n        processPropertySet(queryStringPropertyName, requiredQueryStringParams);\n        processPropertySet(requestBodyPropertyName, requiredRequestBodyParams);\n\n        // If there are any errors, throw an Error object with all of the messages\n        if (errors.length > 0) {\n            throw new BadRequestError(errors.join(' '));\n        }\n    }\n};\n","const { helpers } = require('common-errors');\n\nmodule.exports = {\n    BadRequestError: helpers.generateClass('BadRequestError'),\n    BadAccountError: helpers.generateClass('BadAccountError'),\n    ConflictError: helpers.generateClass('ConflictError'),\n    ForbiddenError: helpers.generateClass('ForbiddenError'),\n    ProxyError: helpers.generateClass('ProxyError'),\n    UnauthorizedError: helpers.generateClass('UnauthorizedError'),\n    NotFoundError: helpers.generateClass('NotFoundError'),\n    ServiceUnavailableError: helpers.generateClass('ServiceUnavailableError'),\n    NotAcceptableError: helpers.generateClass('NotAcceptableError')\n};\n","var util = require('util');\n\nvar exports = module.exports = {\n  helpers: {\n    generateClass: require('./lib/helpers/class-generator')\n  },\n  middleware: {\n    errorHandler: require('./lib/middleware/errorHandler'),\n    crashProtector: require('./lib/middleware/crashProtector')\n  }\n};\n\nexports.AlreadyInUseError = exports.AlreadyInUse = require('./lib/alreadyInUse');\nexports.ArgumentError = exports.Argument = require('./lib/argument');\nexports.ArgumentNullError = exports.ArgumentNull = require('./lib/argumentNull');\nexports.AuthenticationRequiredError = exports.AuthenticationRequired = require('./lib/authenticationRequired');\nexports.ConnectionError = exports.helpers.generateClass('ConnectionError');\nexports.Error = exports.helpers.generateClass('Error');\nexports.HttpStatusError = exports.HttpStatus = require('./lib/http-status');\nexports.InvalidOperationError = require('./lib/invalid-operation');\nexports.NotFoundError = require('./lib/not-found');\nexports.NotImplementedError = exports.helpers.generateClass('NotImplementedError'),\nexports.NotSupportedError = exports.NotSupported = require('./lib/not-supported');\nexports.NotPermittedError = exports.NotPermitted = require('./lib/notPermitted');\nexports.OutOfMemoryError = exports.helpers.generateClass('OutOfMemoryError');\nexports.RangeError = exports.helpers.generateClass('RangeError', { extends: RangeError });\nexports.ReferenceError = exports.helpers.generateClass('ReferenceError', { extends: ReferenceError });\nexports.StackOverflowError = exports.helpers.generateClass('StackOverflowError');\nexports.SyntaxError = exports.helpers.generateClass('SyntaxError', { extends: SyntaxError });\nexports.TimeoutError = require('./lib/timeout.js')\nexports.TypeError = exports.helpers.generateClass('TypeError', { extends: TypeError });\nexports.URIError = exports.helpers.generateClass('URIError', { extends: URIError });\nexports.ValidationError = exports.Validation = require('./lib/validation');\n\nexports.io = {\n  IOError: require('./lib/io/io')\n};\nexports.io.DirectoryNotFoundError = exports.helpers.generateClass('DirectoryNotFoundError', { extends: exports.io.IOError });\nexports.io.DriveNotFoundError = exports.helpers.generateClass('DriveNotFoundError', { extends: exports.io.IOError });\nexports.io.EndOfStreamError = exports.helpers.generateClass('EndOfStreamError', { extends: exports.io.IOError });\nexports.io.FileLoadError = require('./lib/io/file-load');\nexports.io.FileNotFoundError = require('./lib/io/file-not-found');\nexports.io.SocketError = exports.helpers.generateClass('SocketError', { extends: exports.io.IOError });\n\nexports.data = {\n  DataError: require('./lib/data/data')\n};\nexports.data.MemcachedError = exports.helpers.generateClass('MemcachedError', { extends: exports.data.DataError });\nexports.data.MongoDBError = exports.helpers.generateClass('MongoDBError', { extends: exports.data.DataError });\nexports.data.RedisError = exports.helpers.generateClass('RedisError', { extends: exports.data.DataError });\nexports.data.RollbackError = exports.helpers.generateClass('RollbackError', { extends: exports.data.DataError });\nexports.data.SQLError = exports.helpers.generateClass('SQLError', { extends: exports.data.DataError });\nexports.data.TransactionError = exports.helpers.generateClass('TransactionError', { extends: exports.data.DataError });\n\n\n\nexports.Generic = exports.helpers.generateClass('GenericError'); //deprecated\n\n\nvar logErrorDeprecationWarning = false;\nmodule.exports.logError = function(err, cb) {\n  if (!logErrorDeprecationWarning) console.warn(\"logError is deprecated.  Use log instead.\");\n  logErrorDeprecationWarning = true;\n\n  if (err && !err.isLogged) {\n    err.isLogged = true;\n    console.error(err);\n  }\n  if (cb) cb(err);\n};\n\nmodule.exports.log = function(err, message) {\n  if (typeof err == 'string') {\n    err = new module.exports.Error(err);\n  } else {\n    if (message) {\n      err.message = message;\n    }\n    err = module.exports.prependCurrentStack(err, 3);\n  }\n  if (err) {\n    console.error(err && err.stack || err);\n    err.isLogged = true;\n  }\n  return err;\n}\n\nmodule.exports.prependCurrentStack = function(err, offset_) {\n  var linesToSkip = (typeof offset_ === 'undefined') ? 2 : offset_;\n  var stackToPrepend = (new Error()).stack.split(\"\\n\").slice(linesToSkip);\n  var mainStack = (err.stack || '').split(\"\\n\");\n  var errTitle = mainStack.shift();\n  err.stack = [errTitle].concat(stackToPrepend, \"====\", mainStack).join(\"\\n\");\n  return err;\n};","var util = require('util');\nvar key = \"__COMMON-ERRORS-TYPES__\";\nvar global_errors = global[key] = global[key] || {};\n\nmodule.exports = function global_extend(Class) {\n  Class.__original_prototype__ = Class.prototype;\n  var global_class = global_errors[Class.name] = global_errors[Class.name] || Class;\n  Class.prototype = Class.__global_prototype__ = global_class.prototype;\n  Class.prototype.global_initialize = Class.prototype.global_initialize || function global_initialize(Class){\n    var proto_keys = Object.keys(Class.__original_prototype__);\n    for(var i = 0; i<proto_keys.length; i++) {\n      var proto_key = proto_keys[i];\n      this[proto_key] = Class.__original_prototype__[proto_key];\n    }\n  };\n}","var HttpStatusError = require('../http-status');\n\nmodule.exports = function errorHandler(err, req, res, next){\n  if(!err) {\n    if(next) return next();\n    else return res.end();\n  }\n\n  err = new HttpStatusError(err, req);\n  if(err.status_code >= 500) {\n    console.error(err.stack);\n    err.message = HttpStatusError.message_map[500]; //hide the real error from user agent.\n  }\n\n  res.status(err.status_code).send(err.message);\n}\n","module.exports = function (errorHandler){\n  return function crashProtector(req, res, next) {\n    var domain = require('domain'); //require only if needed, because \"Due to their experimental nature, the Domains features are disabled unless the domain module is loaded at least once.\"\n    var d = domain.create();\n    d.on('error', function(err){ \n      console.error(\"Fatal crash protected!\");\n      d.dispose();\n      if(res.finished || Object.keys(res._headers).length) {\n        console.error(err && err.stack);\n        return res.end();\n      } \n      if(errorHandler) errorHandler(err, req, res);\n      else next(err);\n    });\n    d.run(next);\n  }\n}\n\nvar findErrorHandler = function(app){\n  try {\n    var errorHandler;\n    var foundRouter = false;\n    for(var i=0; i<app.stack; i++){\n      var middleware = app.stack[i];\n      if(foundRouter && middleware.handle.length >= 4) {\n        errorHandler = middleware;\n        break;\n      } else if(app.router === middleware.handle) foundRouter = true;\n    }\n    return errorHandler;\n  } catch(e) {\n    console.error(\"Crash protector error\", e);\n  }\n}","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"AlreadyInUseError\", {\n  args: ['entity_name', 'arg1', 'arg2', 'arg3', 'arg4'],\n  generateMessage: function(){\n    var args = Array.prototype.slice.call(this.args, 1);\n    return \"The specified '\" + this.entity_name + \"' value is already in use for: \" + args.join(', ');\n  }\n})\n","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"ArgumentNullError\", {\n  args: ['argumentName', 'inner_error'],\n  extends: require('./argument'),\n  generateMessage: function(){\n    return \"Missing argument: \" + this.argumentName;\n  }\n})\n","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"AuthenticationRequiredError\", {\n  args: ['message', 'inner_error'],\n  generateMessage: function(){\n    return \"An attempt was made to perform an operation without authentication: \" + this.message;\n  }\n})\n","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"InvalidOperationError\", {\n  args: ['message', 'inner_error'],\n  generateMessage: function(){\n    return \"Invalid Operation: \" + this.message;\n  }\n})\n","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"NotFoundError\", {\n  args: ['entity_name', 'inner_error'],\n  generateMessage: function(){\n    return 'Not Found: \"' + this.entity_name + '\"';\n  }\n})\n","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"NotSupportedError\", {\n  args: ['message', 'inner_error'],\n  generateMessage: function(){\n    return \"Not Supported: \" + this.message;\n  }\n})\n","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"NotPermittedError\", {\n  args: ['message', 'inner_error'],\n  generateMessage: function(){\n    return \"An attempt was made to perform an operation that is not permitted: \" + this.message;\n  }\n})\n","var generateClass = require('./helpers/class-generator');\nmodule.exports = generateClass(\"TimeoutError\", {\n  args: ['time', 'inner_error'],\n  generateMessage: function(){\n  \tif(/^\\d/.test(this.time)) return \"Timeout of '\" + this.time + \"' exceeded\";\n  \telse return \"Timeout exceeded: \" + this.time;\n  }\n})\n","var generateClass = require('./helpers/class-generator');\nvar ArgumentError = require('./argument');\n\nvar ValidationError = module.exports = generateClass(\"ValidationError\", {\n  args: ['message', 'code', 'field']\n});\n\nValidationError.prototype.addError = function addError(error) {\n  this.errors = this.errors || [];\n  this.errors.push(error);\n  return this;\n}\n\nValidationError.prototype.addErrors = function addErrors(errors) {\n  if(!(errors instanceof Array)) throw new ArgumentError(\"errors\");\n  \n  this.errors = this.errors || [];\n  Array.prototype.push.apply(this.errors, errors);\n  return this;\n}\n\nValidationError.prototype.generateMessage = function generateMessage(){\n  return this.message || \"Validation failed.\";\n}\n\nValidationError.prototype.toJSON = function toJSON(){\n  var o = {};\n  if(this.errors) {\n    if(this.message) o.message = this.message;\n    o.errors = this.errors.map(function(error){\n      return error.toJSON();\n    });\n  } else {\n    if(this.message) o.text = this.message;\n    if(this.code) o.code = this.code;\n    if(this.field) o.field = this.field;    \n  }\n  return o;\n}","var generateClass = require('../helpers/class-generator');\nmodule.exports = generateClass(\"FileLoadError\", {\n  args: ['file_name', 'inner_error'],\n  extends: require('./io'),\n  generateMessage: function(){\n    return \"Unable to load file: \" + this.file_name;\n  }\n});\n","var generateClass = require('../helpers/class-generator');\nmodule.exports = generateClass(\"FileNotFoundError\", {\n  args: ['file_name', 'inner_error'],\n  extends: require('./io'),\n  generateMessage: function(){\n    return \"File not found: \" + this.file_name;\n  }\n});\n","module.exports = require('../helpers/class-generator')('DataError');"]}